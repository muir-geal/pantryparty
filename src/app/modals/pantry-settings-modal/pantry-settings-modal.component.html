<ion-header>
  <ion-toolbar>
    <ion-title> Pantry Settings </ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="dismiss()"
        ><ion-icon name="close-outline"></ion-icon
      ></ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div *ngIf="pantryCreated">
    <ion-item>
      <ion-label
        ><h2>pantry name: {{ currentName }}</h2>
        <p>nickname: {{ currentNick }}</p></ion-label
      >
    </ion-item>
    <ion-button
      shape="round"
      expand="block"
      color="dark"
      (click)="enableEditing()"
    >
      edit pantry info
    </ion-button>

    <div *ngIf="isEditing">
      <ion-item>
        <ion-input
          [(ngModel)]="editName"
          placeholder="enter pantry name"
          type="text"
          maxlength="50"
        >
        </ion-input>
      </ion-item>

      <ion-item>
        <ion-input
          [(ngModel)]="editNick"
          placeholder="enter nickname"
          type="text"
          maxlength="20"
        >
        </ion-input>
      </ion-item>

      <div class="ion-margin-top">
        <ion-button
          shape="round"
          expand="block"
          color="success"
          (click)="saveChanges()"
          [disabled]="!editName.trim() || !editNick.trim()"
        >
          save changes
        </ion-button>

        <ion-button
          shape="round"
          expand="block"
          fill="clear"
          (click)="cancelEditing()"
        >
          cancel
        </ion-button>
      </div>
    </div>
    <ion-item *ngIf="newDailyLimit > 0">
      <ion-label>
        <p>current daily calorie limit</p>
        <h2>{{ newDailyLimit }} calories</h2>
      </ion-label>
    </ion-item>

    <ion-item>
      <ion-label position="stacked">Daily Calorie Limit</ion-label>
      <ion-input
        type="number"
        [(ngModel)]="newDailyLimit"
        placeholder="enter daily calorie limit"
      >
      </ion-input>
    </ion-item>

    <ion-button
      shape="round"
      expand="block"
      color="dark"
      (click)="setDailyLimit()"
      [disabled]="newDailyLimit < 0"
    >
      set daily calorie limit
    </ion-button>

    <ion-button
      class="ion-margin-top"
      expand="block"
      shape="round"
      color="danger"
      (click)="deletePantry()"
      >delete my pantry</ion-button
    >
  </div>
</ion-content>
