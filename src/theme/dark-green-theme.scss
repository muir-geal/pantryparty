// Comprehensive Dark Green Theme - All Surfaces
:root {
  // Primary green color palette
  --ion-color-primary: #4a9b8e;
  --ion-color-primary-rgb: 74, 155, 142;
  --ion-color-primary-contrast: #ffffff;
  --ion-color-primary-contrast-rgb: 255, 255, 255;
  --ion-color-primary-shade: #41887d;
  --ion-color-primary-tint: #5ca599;
  
  --ion-color-secondary: #6db65b;
  --ion-color-secondary-rgb: 109, 182, 91;
  --ion-color-secondary-contrast: #ffffff;
  --ion-color-secondary-contrast-rgb: 255, 255, 255;
  --ion-color-secondary-shade: #60a050;
  --ion-color-secondary-tint: #7cbd6b;
}

// Force dark mode with comprehensive green theme
:root {
  // Main background colors - lighter dark green shades
  --ion-background-color: #1a2420;
  --ion-background-color-rgb: 26, 36, 32;
  
  // Surface colors - various green tints
  --ion-color-step-50: #1a2420;
  --ion-color-step-100: #1f2b25;
  --ion-color-step-150: #243329;
  --ion-color-step-200: #2a3b2e;
  --ion-color-step-250: #2f4333;
  --ion-color-step-300: #344b37;
  --ion-color-step-350: #3a533c;
  --ion-color-step-400: #3f5b41;
  --ion-color-step-450: #446345;
  --ion-color-step-500: #4a6b4a;
  --ion-color-step-550: #4f734f;
  --ion-color-step-600: #547b53;
  --ion-color-step-650: #5a8358;
  --ion-color-step-700: #5f8b5d;
  --ion-color-step-750: #649361;
  --ion-color-step-800: #6a9b66;
  --ion-color-step-850: #6fa36a;
  --ion-color-step-900: #74ab6f;
  --ion-color-step-950: #7ab374;
  
  // Text colors - light greens and whites
  --ion-text-color: #e8f5ea;
  --ion-text-color-rgb: 232, 245, 234;
  
  --ion-text-color-step-50: #d0e8d4;
  --ion-text-color-step-100: #b8dbbe;
  --ion-text-color-step-150: #a0cea8;
  --ion-text-color-step-200: #88c192;
  --ion-text-color-step-250: #70b47c;
  --ion-text-color-step-300: #58a766;
  --ion-text-color-step-350: #409a50;
  --ion-text-color-step-400: #288d3a;
  --ion-text-color-step-450: #248030;
  --ion-text-color-step-500: #207326;
  --ion-text-color-step-550: #1c661c;
  --ion-text-color-step-600: #185912;
  --ion-text-color-step-650: #144c08;
  --ion-text-color-step-700: #0f3f00;
  --ion-text-color-step-750: #0b3200;
  --ion-text-color-step-800: #072500;
  --ion-text-color-step-850: #031800;
  --ion-text-color-step-900: #000b00;
  --ion-text-color-step-950: #000000;
  
  // Item and card backgrounds
  --ion-item-background: #1a2420;
  --ion-item-background-activated: #243329;
  --ion-card-background: #1f2b25;
  
  // Modal and overlay backgrounds
  --ion-modal-background: #1a2420;
  --ion-popover-background: #1f2b25;
  --ion-backdrop-color: rgba(10, 18, 16, 0.8);
  
  // Toolbar and header backgrounds
  --ion-toolbar-background: #1a2420;
  --ion-toolbar-color: #e8f5ea;
  
  // Tab bar background
  --ion-tab-bar-background: #1a2420;
  --ion-tab-bar-color: #88c192;
  --ion-tab-bar-color-activated: #4a9b8e;
  
  // Border colors
  --ion-border-color: #3a533c;
  --ion-item-border-color: #3a533c;
  
  // List backgrounds
  --ion-list-background: #1a2420;
  --ion-list-ios-background: #1a2420;
  --ion-list-md-background: #1a2420;
  
  // Content backgrounds - lighter
  --ion-content-background: #1a2420;
  
  // Segment backgrounds
  --ion-segment-background: #1a2420;
  --ion-segment-color: #88c192;
  --ion-segment-color-activated: #e8f5ea;
  --ion-segment-indicator-color: #4a9b8e;
  
  // Searchbar backgrounds
  --ion-searchbar-background: #1a2420;
  --ion-searchbar-color: #e8f5ea;
  --ion-searchbar-input-background: #243329;
  
  // Refresher colors
  --ion-refresher-background: #1a2420;
  --ion-refresher-color: #4a9b8e;
  
  // Loading colors
  --ion-loading-background: #1f2b25;
  --ion-loading-color: #e8f5ea;
  
  // Toast backgrounds
  --ion-toast-background: #2a3b2e;
  --ion-toast-color: #e8f5ea;
  
  // Action sheet backgrounds
  --ion-action-sheet-background: #1f2b25;
  --ion-action-sheet-color: #e8f5ea;
  
  // Picker backgrounds
  --ion-picker-background: #1f2b25;
  --ion-picker-color: #e8f5ea;
  
  // Datetime backgrounds
  --ion-datetime-background: #1f2b25;
  --ion-datetime-color: #e8f5ea;
  
  // Checkbox and radio colors
  --ion-checkbox-background: #1a2420;
  --ion-checkbox-background-checked: #4a9b8e;
  --ion-radio-background: #1a2420;
  --ion-radio-background-checked: #4a9b8e;
  
  // Input backgrounds
  --ion-input-background: #1a2420;
  --ion-input-color: #e8f5ea;
  --ion-input-border-color: #3a533c;
  
  // Select backgrounds
  --ion-select-background: #1a2420;
  --ion-select-color: #e8f5ea;
  
  // Toggle colors
  --ion-toggle-background: #3a533c;
  --ion-toggle-background-checked: #4a9b8e;
  
  // Range colors
  --ion-range-bar-background: #3a533c;
  --ion-range-bar-background-active: #4a9b8e;
  --ion-range-knob-background: #4a9b8e;
}

// Global component overrides
* {
  --background: var(--ion-color-step-50);
  --color: var(--ion-text-color);
}

// Specific component targeting
ion-content {
  --background: var(--ion-background-color);
  --color: var(--ion-text-color);
}

ion-header {
  --background: var(--ion-color-step-100);
  --color: var(--ion-text-color);
}

ion-footer {
  --background: var(--ion-color-step-100);
  --color: var(--ion-text-color);
}

ion-toolbar {
  --background: var(--ion-color-step-100);
  --color: var(--ion-text-color);
}

ion-list {
  --background: var(--ion-color-step-50);
}

ion-item {
  --background: var(--ion-color-step-100);
  --color: var(--ion-text-color);
  --border-color: var(--ion-color-step-200);
}

ion-card {
  --background: var(--ion-color-step-100);
  --color: var(--ion-text-color);
  border: none;
}

ion-modal {
  --background: var(--ion-color-step-50);
  --color: var(--ion-text-color);
  
  .modal-wrapper {
    --background: var(--ion-color-step-50);
    --color: var(--ion-text-color);
  }
  
  ion-header {
    --background: var(--ion-color-step-100);
    --color: var(--ion-text-color);
  }
  
  ion-content {
    --background: var(--ion-color-step-50);
    --color: var(--ion-text-color);
  }
  
  ion-footer {
    --background: var(--ion-color-step-100);
    --color: var(--ion-text-color);
  }
}

ion-popover {
  --background: var(--ion-color-step-100);
  --color: var(--ion-text-color);
}

ion-accordion-group {
  --background: var(--ion-color-step-50);
  
  ion-accordion {
    --background: var(--ion-color-step-100);
    --color: var(--ion-text-color);
    border: none;
    
    &.accordion-expanded {
      --background: var(--ion-color-step-150);
    }
    
    // Target the accordion button/header specifically - darker
    ion-item {
      --background: var(--ion-color-step-200) !important;
      --color: var(--ion-text-color) !important;
      --border-color: var(--ion-color-step-300) !important;
    }
  }
}

// Input styling
ion-input {
  --background: var(--ion-color-step-100);
  --color: var(--ion-text-color);
  --border-color: var(--ion-color-step-200);
}

ion-textarea {
  --background: var(--ion-color-step-100);
  --color: var(--ion-text-color);
  --border-color: var(--ion-color-step-200);
}

ion-select {
  --background: var(--ion-color-step-100);
  --color: var(--ion-text-color);
}

ion-searchbar {
  --background: var(--ion-color-step-100);
  --color: var(--ion-text-color);
}

// Button styling - white icons
ion-button {
  --background: var(--ion-color-primary);
  --color: var(--ion-color-primary-contrast);
  
  // Force white icons in buttons
  ion-icon {
    color: #ffffff !important;
  }
  
  &.button-outline {
    --border-color: var(--ion-color-primary);
    --color: var(--ion-color-primary);
    
    ion-icon {
      color: var(--ion-color-primary) !important;
    }
  }
  
  &.button-clear {
    --color: var(--ion-color-primary);
    
    ion-icon {
      color: var(--ion-color-primary) !important;
    }
  }
  
  &.button-fill-clear {
    --color: var(--ion-color-primary);
    
    ion-icon {
      color: var(--ion-color-primary) !important;
    }
  }
}

// Additional button icon targeting
ion-button ion-icon,
.button-inner ion-icon {
  color: #ffffff !important;
}

ion-button.button-outline ion-icon,
ion-button.button-clear ion-icon,
ion-button.button-fill-clear ion-icon {
  color: var(--ion-color-primary) !important;
}

// Segment styling
ion-segment {
  --background: var(--ion-color-step-100);
  
  ion-segment-button {
    --color: var(--ion-text-color-step-300);
    --color-activated: var(--ion-text-color);
    --indicator-color: var(--ion-color-primary);
  }
}

// Alert styling
ion-alert {
  --background: var(--ion-color-step-100);
  --color: var(--ion-text-color);
  
  .alert-button {
    --color: var(--ion-color-primary);
  }
}

// Action sheet styling
ion-action-sheet {
  --background: var(--ion-color-step-100);
  --color: var(--ion-text-color);
  
  .action-sheet-button {
    --color: var(--ion-text-color);
  }
  
  .action-sheet-destructive {
    --color: #ff6b6b;
  }
}

// Loading styling
ion-loading {
  --background: var(--ion-color-step-100);
  --color: var(--ion-text-color);
  --spinner-color: var(--ion-color-primary);
}

// Toast styling
ion-toast {
  --background: var(--ion-color-step-150);
  --color: var(--ion-text-color);
  --button-color: var(--ion-color-primary);
}

// Picker styling
ion-picker {
  --background: var(--ion-color-step-100);
  --color: var(--ion-text-color);
}

// Datetime styling
ion-datetime {
  --background: var(--ion-color-step-100);
  --color: var(--ion-text-color);
}

// Override Ionic color classes that interfere with our theme
.ion-color-light {
  --ion-color-base: var(--ion-color-step-100) !important;
  --ion-color-base-rgb: var(--ion-color-step-100-rgb, 26, 36, 32) !important;
  --ion-color-contrast: var(--ion-text-color) !important;
  --ion-color-contrast-rgb: var(--ion-text-color-rgb) !important;
  --ion-color-shade: var(--ion-color-step-150) !important;
  --ion-color-tint: var(--ion-color-step-50) !important;
}

.ion-color-medium {
  --ion-color-base: var(--ion-color-step-200) !important;
  --ion-color-base-rgb: var(--ion-color-step-200-rgb, 42, 59, 46) !important;
  --ion-color-contrast: var(--ion-text-color) !important;
  --ion-color-contrast-rgb: var(--ion-text-color-rgb) !important;
  --ion-color-shade: var(--ion-color-step-250) !important;
  --ion-color-tint: var(--ion-color-step-150) !important;
}

.ion-color-dark {
  --ion-color-base: var(--ion-color-step-300) !important;
  --ion-color-base-rgb: var(--ion-color-step-300-rgb, 52, 75, 55) !important;
  --ion-color-contrast: var(--ion-text-color) !important;
  --ion-color-contrast-rgb: var(--ion-text-color-rgb) !important;
  --ion-color-shade: var(--ion-color-step-350) !important;
  --ion-color-tint: var(--ion-color-step-250) !important;
}

// NUCLEAR OVERRIDES - Force everything to dark green
body {
  --background: var(--ion-background-color) !important;
  background: var(--ion-background-color) !important;
}

html {
  --background: var(--ion-background-color) !important;
  background: var(--ion-background-color) !important;
}

// Force all content backgrounds to lighter dark green
ion-content,
ion-content.content,
.ion-page > ion-content,
ion-tab ion-content,
ion-router-outlet,
ion-app,
.app-root {
  --background: var(--ion-background-color) !important;
  background: var(--ion-background-color) !important;
  --color: var(--ion-text-color) !important;
}

// Force tab backgrounds
ion-tab {
  --background: var(--ion-background-color) !important;
  background: var(--ion-background-color) !important;
}

// Accordion - SUPER SPECIFIC targeting with darker headers
ion-accordion-group {
  --background: var(--ion-background-color) !important;
  background: var(--ion-background-color) !important;
  
  ion-accordion {
    --background: var(--ion-color-step-100) !important;
    background: var(--ion-color-step-100) !important;
    --color: var(--ion-text-color) !important;
    
    // Force the accordion button/header - darker
    > ion-item {
      --background: var(--ion-color-step-200) !important;
      background: var(--ion-color-step-200) !important;
      --color: var(--ion-text-color) !important;
    }
    
    // Force expanded state
    &.accordion-expanded {
      --background: var(--ion-color-step-100) !important;
      background: var(--ion-color-step-100) !important;
      
      > ion-item {
        --background: var(--ion-color-step-200) !important;
        background: var(--ion-color-step-200) !important;
      }
    }
  }
}

// Target ALL ion-items everywhere
ion-item {
  --background: var(--ion-color-step-100) !important;
  background: var(--ion-color-step-100) !important;
  --color: var(--ion-text-color) !important;
}

// Specific accordion item targeting - darker headers
ion-accordion-group ion-accordion ion-item,
ion-accordion ion-item,
.accordion-header,
.accordion-content ion-item {
  --background: var(--ion-color-step-200) !important;
  background: var(--ion-color-step-200) !important;
  --color: var(--ion-text-color) !important;
}

// Force any div or element with specific classes
.native,
.item-native,
.button-native,
.accordion-header-native,
.item-inner {
  --background: var(--ion-color-step-100) !important;
  background: var(--ion-color-step-100) !important;
  --color: var(--ion-text-color) !important;
}

// Accordion header native elements - darker
.accordion-header-native {
  --background: var(--ion-color-step-200) !important;
  background: var(--ion-color-step-200) !important;
}

// Override any remaining system colors
* {
  &[style*="background-color: rgb(68, 68, 68)"],
  &[style*="background-color: rgb(34, 34, 34)"],
  &[style*="background-color: rgb(51, 51, 51)"],
  &[style*="background-color: #444"],
  &[style*="background-color: #222"],
  &[style*="background-color: #333"],
  &[style*="background: rgb(68, 68, 68)"],
  &[style*="background: rgb(34, 34, 34)"],
  &[style*="background: rgb(51, 51, 51)"] {
    background-color: var(--ion-color-step-100) !important;
    background: var(--ion-color-step-100) !important;
  }
}

// Catch-all for any remaining grey backgrounds
div,
ion-item,
ion-accordion,
ion-content,
ion-list {
  &:not([class*="primary"]):not([class*="secondary"]):not([class*="success"]):not([class*="warning"]):not([class*="danger"]) {
    --background: var(--ion-color-step-100) !important;
    background: var(--ion-color-step-100) !important;
  }
}

// Custom scrollbar for webkit browsers
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: var(--ion-color-step-50);
}

::-webkit-scrollbar-thumb {
  background: var(--ion-color-primary);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--ion-color-primary-tint);
}